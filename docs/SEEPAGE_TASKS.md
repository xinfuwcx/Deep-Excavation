# IGA渗流分析模块开发计划

## 背景

基于测试结果，我们发现Kratos已安装并可用，但IGA应用程序未安装。我们将使用已有的ConvectionDiffusion应用程序来实现饱和土渗流分析，并结合现有的结构分析功能。

## 开发子任务

### 1. 基础渗流模型设计

- [x] 测试Kratos安装和可用模块
- [x] 设计渗流分析的数据结构和接口
- [x] 定义饱和土渗流分析的参数模型
- [x] 创建渗流分析的配置文件模板

### 2. IGA渗流求解器开发

- [x] 创建`IGASeepageSolver`类，封装ConvectionDiffusion应用
- [x] 实现饱和土的达西定律
- [x] 开发NURBS控制点上的水头边界条件设置方法
- [x] 实现稳态渗流分析功能

### 3. 土-水耦合分析

- [ ] 设计有效应力计算框架
- [ ] 实现孔隙水压力到结构分析的传递机制
- [ ] 开发简化的土-水耦合分析流程

### 4. 渗流结果处理

- [x] 开发渗流分析结果提取工具
- [x] 实现水头等值线和流速矢量场可视化
- [ ] 创建渗流路径和渗透力计算功能

### 5. 示例与验证

- [x] 开发简单的基坑渗流分析示例
- [ ] 创建验证案例，与解析解比较
- [ ] 编写渗流分析使用教程

## 实施策略

考虑到IGA应用程序未安装，我们将采取以下策略：

1. **使用现有应用程序**：利用已安装的ConvectionDiffusion和StructuralMechanics应用程序
2. **简化模型**：先实现基本的达西渗流，不考虑非饱和条件
3. **弱耦合方法**：采用顺序求解的弱耦合方法处理土-水相互作用
4. **逐步扩展**：先实现稳态分析，后续再扩展到瞬态分析

## 当前优先任务

1. ~~创建`src/core/simulation/iga_seepage_solver.py`基础框架~~ (已完成)
2. ~~设计渗流分析的数据模型和参数结构~~ (已完成)
3. ~~开发基于ConvectionDiffusion的渗流分析封装~~ (已完成)
4. 开发土-水耦合分析框架
5. 创建渗流分析验证案例

## 技术挑战与解决方案

### 挑战1：IGA应用缺失
**解决方案**：使用常规网格方法进行渗流分析，结果再映射到NURBS控制点

### 挑战2：渗流-结构耦合
**解决方案**：采用分离求解策略，先计算渗流场，再将水压力作为荷载应用于结构分析

### 挑战3：复杂边界条件
**解决方案**：简化边界条件处理，使用点约束和面约束实现

## 下一步工作计划

1. **土-水耦合分析模块**
   - 开发有效应力计算器
   - 实现水压力到结构荷载的转换
   - 创建耦合分析工作流

2. **验证与测试**
   - 设计基准测试案例
   - 与解析解进行比较
   - 进行性能测试

3. **文档与教程**
   - 编写用户手册
   - 创建渗流分析教程
   - 准备示例案例 